# ===========================================
# MindRoom Infra + Platform Environment (.env)
# ===========================================
# Copy this file to saas-platform/.env and fill in the values.
# This file is read by terraform-k8s/scripts/up.sh.
#
# NEVER commit saas-platform/.env to version control.
# ===========================================

# --- Hetzner Cloud (required) ---
HCLOUD_TOKEN=your_hetzner_api_token

# --- Base domain and environment ---
# Use the apex/root domain here (not a subdomain). The environment is
# automatically prefixed (e.g., test.mindroom.chat, staging.mindroom.chat).
TF_VAR_domain=mindroom.chat
# One of: test | staging | production
TF_VAR_environment=test

# --- Supabase (required) ---
TF_VAR_supabase_url=https://YOUR_PROJECT.supabase.co
TF_VAR_supabase_anon_key=eyJ...
TF_VAR_supabase_service_key=eyJ...

# --- Stripe (required for billing flows; test keys ok) ---
TF_VAR_stripe_publishable_key=pk_test_...
TF_VAR_stripe_secret_key=sk_test_...
TF_VAR_stripe_webhook_secret=whsec_...
# Optional price IDs (if you use dynamic plan pricing)
TF_VAR_stripe_price_starter=price_...
TF_VAR_stripe_price_professional=price_...
TF_VAR_stripe_price_enterprise=price_...

# --- Provisioner / Registry (required) ---
# Provisioner API key used by admin proxy to call system routes
TF_VAR_provisioner_api_key=some-long-random-string
# Private registry access (Gitea)
TF_VAR_gitea_user=basnijholt
TF_VAR_gitea_token=your_gitea_token
TF_VAR_registry=git.nijho.lt/basnijholt
TF_VAR_image_tag=latest

# --- DNS (optional) ---
# If both are set, the deploy script will auto-enable DNS via Porkbun.
PORKBUN_API_KEY=
PORKBUN_SECRET_API_KEY=

# --- Cluster settings (optional) ---
TF_VAR_cluster_name=mindroom-k8s
TF_VAR_server_type=cpx31
TF_VAR_location=fsn1

# --- OAuth Providers (optional) ---
TF_VAR_google_oauth_client_id=
TF_VAR_google_oauth_client_secret=
TF_VAR_github_oauth_client_id=
TF_VAR_github_oauth_client_secret=

# ===========================================
# Usage
# 1) Copy to saas-platform/.env and fill values.
# 2) Deploy without DNS:   make tf-up
#    Deploy with DNS:      make tf-up-dns
# The script sources this file and passes TF_VAR_* to Terraform/Helm.
# ===========================================
