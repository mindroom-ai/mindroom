# =====================================================
# MINDROOM SAAS PLATFORM CONFIGURATION (Example)
# =====================================================
# Copy this file to saas-platform/.env and fill in values.
# The deploy script (terraform-k8s/scripts/up.sh) sources .env and forwards
# TF_VAR_* variables to Terraform/Helm.

# ------------------------
# Platform Configuration
# ------------------------
# For production: PLATFORM_DOMAIN=mindroom.chat
# For staging: PLATFORM_DOMAIN=staging.mindroom.chat
# For test: PLATFORM_DOMAIN=test.mindroom.chat
PLATFORM_DOMAIN=mindroom.chat
ROOT_DOMAIN=mindroom.chat        # The root domain registered with DNS provider
ENVIRONMENT=test                 # test|staging|production
REGISTRY=git.nijho.lt/basnijholt
IMAGE_TAG=latest

# ------------------------
# Infrastructure
# ------------------------
HCLOUD_TOKEN=

# ------------------------
# Gitea Registry Authentication
# ------------------------
GITEA_USER=basnijholt
GITEA_TOKEN=

# ------------------------
# Supabase (from terraform)
# ------------------------
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=

# ------------------------
# Stripe (from terraform)
# ------------------------
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ------------------------
# Provisioner API Key (secure random key for backend API authentication)
# ------------------------
PROVISIONER_API_KEY=

# ------------------------
# AI Model API Keys (for MindRoom instances)
# ------------------------
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
OPENROUTER_API_KEY=

# ------------------------
# Porkbun DNS
# ------------------------
PORKBUN_API_KEY=
PORKBUN_SECRET_API_KEY=

# ------------------------
# Cluster settings (optional)
# ------------------------
export TF_VAR_cluster_name=mindroom-k8s
export TF_VAR_server_type=cpx31
export TF_VAR_location=fsn1

# ------------------------
# OAuth Providers (optional; used for instructions only)
# ------------------------
export TF_VAR_google_oauth_client_id=
export TF_VAR_google_oauth_client_secret=
export TF_VAR_github_oauth_client_id=
export TF_VAR_github_oauth_client_secret=

# =====================================================
# Terraform Variables (auto-export for terraform-k8s)
# When sourcing this file, these will be available to Terraform
# =====================================================
export TF_VAR_hcloud_token="${HCLOUD_TOKEN}"
export TF_VAR_registry="${REGISTRY}"
export TF_VAR_image_tag="${IMAGE_TAG}"
export TF_VAR_gitea_user="${GITEA_USER}"
export TF_VAR_gitea_token="${GITEA_TOKEN}"

# Domain + environment
export TF_VAR_domain="${PLATFORM_DOMAIN}"
export TF_VAR_root_domain="${ROOT_DOMAIN:-mindroom.chat}"
export TF_VAR_environment="${ENVIRONMENT:-test}"

# DNS
export TF_VAR_porkbun_api_key="${PORKBUN_API_KEY}"
export TF_VAR_porkbun_secret_key="${PORKBUN_SECRET_API_KEY}"

# Supabase
export TF_VAR_supabase_url="${SUPABASE_URL}"
export TF_VAR_supabase_anon_key="${SUPABASE_ANON_KEY}"
export TF_VAR_supabase_service_key="${SUPABASE_SERVICE_KEY}"

# Stripe
export TF_VAR_stripe_publishable_key="${STRIPE_PUBLISHABLE_KEY}"
export TF_VAR_stripe_secret_key="${STRIPE_SECRET_KEY}"
export TF_VAR_stripe_webhook_secret="${STRIPE_WEBHOOK_SECRET}"

# Provisioner
export TF_VAR_provisioner_api_key="${PROVISIONER_API_KEY}"
