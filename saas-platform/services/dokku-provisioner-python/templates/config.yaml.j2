# MindRoom Configuration
# Tier: {{ tier }}
# Generated at: {{ timestamp }}

models:
  available_models:
{% for model_key, model_config in models.items() %}
    {{ model_key }}:
      model_id: {{ model_config.model_id }}
      display_name: {{ model_config.display_name }}
      provider: {{ model_config.provider }}
{% if model_config.get('rate_limit') %}
      rate_limit: {{ model_config.rate_limit }}
{% endif %}
{% endfor %}

memory:
  provider: mem0
  config:
    vector_store:
      provider: chroma
      config:
        collection_name: mindroom_memory
        persist_directory: /app/mindroom_data/memory

agents:
{% for agent_key, agent_config in agents.items() %}
  {{ agent_key }}:
    display_name: {{ agent_config.display_name }}
    role: {{ agent_config.role }}
    model: {{ agent_config.model }}
    tools:
{% for tool in agent_config.tools %}
      - {{ tool }}
{% endfor %}
    instructions:
{% for instruction in agent_config.instructions %}
      - {{ instruction }}
{% endfor %}
    rooms:
{% for room in agent_config.rooms %}
      - {{ room }}
{% endfor %}
    num_history_runs: {{ agent_config.num_history_runs }}
{% endfor %}

rooms:
{% for room_key, room_config in rooms.items() %}
  {{ room_key }}:
    description: {{ room_config.description }}
{% endfor %}

tools:
{% for tool_key, tool_config in tools.items() %}
  {{ tool_key }}:
    enabled: {{ tool_config.enabled }}
{% if tool_config.get('max_size_mb') %}
    max_size_mb: {{ tool_config.max_size_mb }}
{% endif %}
{% if tool_config.get('safe_mode') is not none %}
    safe_mode: {{ tool_config.safe_mode }}
{% endif %}
{% if tool_config.get('max_results') %}
    max_results: {{ tool_config.max_results }}
{% endif %}
{% if tool_config.get('public_only') is not none %}
    public_only: {{ tool_config.public_only }}
{% endif %}
{% endfor %}

general_settings:
  response_timeout: 60
  max_message_length: 4000
  enable_analytics: true
  instance_id: {{ instance_id }}
  tier: {{ tier }}

# Resource limits
limits:
  agents: {{ limits.agents }}
  messages_per_day: {{ limits.messages_per_day }}
  memory_mb: {{ limits.memory_mb }}
  cpu_limit: {{ limits.cpu_limit }}
  storage_gb: {{ limits.storage_gb }}
