---
# Authelia configuration for localhost testing
# https://www.authelia.com/configuration/prologue/introduction/

# Server configuration
server:
  address: tcp://0.0.0.0:9091

# Log level
log:
  level: debug

# Theme (light, dark, grey, auto)
theme: auto

# Default redirection URL
default_redirection_url: http://localhost:3005

# Identity validation
identity_validation:
  reset_password:
    jwt_secret: CHANGE_THIS_TO_A_RANDOM_SECRET_USE_OPENSSL_RAND_HEX_32

# TOTP Configuration for 2FA
totp:
  issuer: authelia.com
  period: 30
  skew: 1

# Authentication backend - file-based for simplicity
authentication_backend:
  file:
    path: /config/users_database.yml
    password:
      algorithm: argon2id
      iterations: 1
      memory: 1024
      parallelism: 8
      key_length: 32
      salt_length: 16

# Access Control - who can access what
access_control:
  default_policy: deny
  rules:
    # Allow access to everything for testing
    - domain: "*"
      policy: one_factor

# Session configuration (simplified for localhost)
session:
  name: authelia_session
  secret: CHANGE_THIS_TO_A_RANDOM_SECRET_USE_OPENSSL_RAND_HEX_32
  expiration: 1h
  inactivity: 5m
  remember_me: 1M

  cookies:
    - name: authelia_session
      domain: localhost
      authelia_url: http://localhost:9091
      default_redirection_url: http://localhost:3005
      same_site: lax

# Regulation - prevent brute force
regulation:
  max_retries: 3
  find_time: 2m
  ban_time: 5m

# Storage for user preferences and 2FA
storage:
  encryption_key: CHANGE_THIS_TO_A_RANDOM_SECRET_USE_OPENSSL_RAND_HEX_32
  local:
    path: /config/db.sqlite3

# Notifier for password reset (filesystem for testing)
notifier:
  disable_startup_check: true
  filesystem:
    filename: /config/notification.txt
