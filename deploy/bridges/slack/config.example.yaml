# Homeserver details
homeserver:
    # The address that this appservice can use to connect to the homeserver.
    address: http://localhost:8008
    # The domain of the homeserver (for MXIDs, etc).
    domain: example.com

# Appservice config
appservice:
    # The address that the homeserver can use to connect to this appservice.
    address: http://0.0.0.0:29317

    # Database config
    database: sqlite:////data/mautrix-slack.db

    # The unique ID of this appservice.
    id: slack
    # Username of the appservice bot.
    bot_username: slackbot
    # Display name and avatar for bot. Set to "remove" to remove display name/avatar, leave empty
    # to leave display name/avatar as-is.
    bot_displayname: Slack bridge bot
    bot_avatar: mxc://maunium.net/pVtzLmChZejGxLqmXtQjFxem

    # Authentication tokens for AS <-> HS communication.
    as_token: "This value is generated when generating the registration"
    hs_token: "This value is generated when generating the registration"

# Slack config
slack:
    # Slack app credentials
    # App-Level Token from the Slack App (xapp-...)
    app_token: "xapp-1-..."
    # Bot User OAuth Token (xoxb-...)
    bot_token: "xoxb-..."
    # Team/Workspace ID (T...)
    team_id: "T1234567"

    # Optional: RTM API settings (if not using Socket Mode)
    # rtm:
    #     enabled: false

# Bridge config
bridge:
    # Localpart template of MXIDs for Slack users.
    username_template: "slack_{{.}}"
    # Displayname template for Slack users.
    displayname_template: "{{.RealName}} (Slack)"

    # The prefix for commands. Only required in non-management rooms.
    command_prefix: "!slack"

    # Permissions for using the bridge.
    # Permitted values:
    #   user - Use the bridge with puppeting.
    #   admin - Use and administrate the bridge.
    # Permitted keys:
    #   * - All Matrix users
    #   domain - All users on that homeserver
    #   mxid - That specific user
    permissions:
        "example.com": user
        "@admin:example.com": admin

    # Settings for backfilling messages from Slack
    backfill:
        # Should backfilling be enabled at all?
        enabled: true
        # Maximum number of messages to backfill for new rooms
        initial_limit: 100
        # Maximum age of messages to backfill
        max_age: 604800  # 7 days in seconds

    # Webhook settings for Slack->Matrix messages
    webhook:
        # Should incoming webhooks be enabled
        enabled: true
        # The URL format for webhooks
        url_format: "https://hooks.slack.com/services/{id}/{token}"

    # Settings for syncing
    sync:
        # Should the bridge sync channel members
        channel_members: true
        # Should the bridge sync channel topics
        channel_topic: true
        # Should the bridge sync user profiles
        user_profiles: true

    # Encryption settings
    encryption:
        # Allow encryption, work in group chat rooms with e2ee enabled
        allow: false
        # Default to encryption, force-enable encryption in all portals the bridge creates
        default: false
        # Whether or not to use MSC2409/MSC3202 instead of /sync long polling for e2ee
        appservice: false
        # Require encryption, drop any unencrypted messages.
        require: false
        # Enable key sharing? If enabled, key requests for rooms where users are in will be fulfilled.
        allow_key_sharing: false

    # Settings for relay mode
    relay:
        # Whether relay mode should be allowed.
        enabled: false

# Logging config
logging:
    version: 1
    formatters:
        colored:
            (): mautrix.util.logging.color.ColorFormatter
            format: "[%(asctime)s] [%(levelname)s@%(name)s] %(message)s"
        normal:
            format: "[%(asctime)s] [%(levelname)s@%(name)s] %(message)s"
    handlers:
        console:
            class: logging.StreamHandler
            formatter: colored
    loggers:
        mau:
            level: DEBUG
        mautrix:
            level: DEBUG
        aiohttp:
            level: INFO
    root:
        level: DEBUG
        handlers: [console]
